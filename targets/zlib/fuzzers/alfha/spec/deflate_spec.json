{
  "function_name": "deflate",
  "function_code": "FC_ZLIB_DEFLATE", 
  "function_location": "zlib.h:254",
  "category": "Compression",
  "priority": "Critical",
  "input_structure": {
    "strm": "z_streamp - pointer to initialized z_stream structure",
    "flush": "int - flush mode (Z_NO_FLUSH, Z_PARTIAL_FLUSH, Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH, Z_BLOCK)"
  },
  "validation_conditions": [
    "strm != NULL",
    "strm->state != NULL (must be initialized)",
    "flush in {Z_NO_FLUSH, Z_PARTIAL_FLUSH, Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH, Z_BLOCK}",
    "avail_out should never be zero before call",
    "next_in/next_out pointers valid when avail_in/avail_out > 0"
  ],
  "error_codes": [
    "Z_OK",
    "Z_STREAM_END", 
    "Z_STREAM_ERROR",
    "Z_BUF_ERROR"
  ],
  "side_effects": [
    "updates strm->next_in and strm->avail_in",
    "updates strm->next_out and strm->avail_out", 
    "updates strm->total_in and strm->total_out",
    "updates strm->adler checksum",
    "modifies internal compression state"
  ],
  "constraints": [
    "requires deflateInit() called first",
    "avail_out > 0 before call",
    "must provide input or consume output to avoid infinite loop",
    "Z_FINISH requires processing until Z_STREAM_END returned"
  ],
  "fuzzing_strategy": {
    "input_generation": [
      "various buffer sizes (small, large, boundary values)",
      "different flush modes",
      "incremental data feeding",
      "edge cases: empty input, full output buffer",
      "invalid flush values",
      "NULL/invalid pointers"
    ],
    "coverage_targets": [
      "all flush mode code paths",
      "buffer boundary conditions",
      "compression algorithm branches",
      "error handling paths",
      "state transitions"
    ]
  }
}